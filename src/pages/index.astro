---
import { Image } from 'astro:assets';
import fondoFlores from '@assets/fondos-para-invitaciones-de-bodas-con-flroes-2.png';
// IMPORTA AQUÍ LA FOTO DE LOS NOVIOS
import fotoNovios from '@assets/1.jpeg'; // <--- CAMBIA ESTO POR TU FOTO REAL (ej: @assets/foto-novios.jpg)

import Layout from '../layouts/Layout.astro';
import Carta from '@components/Carta.astro';
import CuentaRegresiva from '@components/CuentaRegresiva.astro'; 
---

<Layout title="Boda de Jonathan y Areli">
    <main class="text-boda-oscuro-base overflow-x-hidden">
        
        <section class="w-full h-screen relative flex items-center justify-center">
            <div class="absolute inset-0 z-0">
                <Image 
                    src={fondoFlores} 
                    alt="Fondo de flores" 
                    class="w-full h-full object-cover brightness-[0.60]" 
                />
            </div>

            <div class="relative z-10 text-center px-4 text-boda-blanco-base drop-shadow-lg flex flex-col justify-center items-center">
                <span class="block text-xl md:text-2xl mb-2 font-secondary-200 tracking-widest uppercase">Nuestra Boda</span>
                <div class="my-6 flex justify-center">
                    <Carta /> 
                </div>
            </div>
        </section>

        <section id="seccion-novios" class="w-full h-screen bg-boda-blanco-base flex flex-col relative">
            
            <div class="h-[50%] w-full relative">
                <div class="absolute top-0 left-0 w-full h-16 bg-gradient-to-b from-boda-blanco-base to-transparent z-10"></div>
                
                <Image src={fotoNovios} alt="Los Novios" class="w-full h-full object-cover object-top opacity-90" />
                
                <div class="absolute bottom-0 left-0 w-full h-20 bg-gradient-to-t from-boda-blanco-base to-transparent z-10"></div>
            </div>

            <div class="h-[20%] w-full flex flex-col justify-center items-center z-20 -mt-6">
                
                <button id="btn-player" class="group relative w-16 h-16 rounded-full bg-boda-azul-base text-boda-blanco-base shadow-xl flex justify-center items-center transition-transform active:scale-95 hover:scale-110">
                    
                    <span class="absolute inline-flex h-full w-full rounded-full bg-boda-azul-base opacity-75 animate-ping group-hover:opacity-100"></span>
                    
                    <div id="icon-pause" class="relative z-10">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-8 h-8">
                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                        </svg>
                    </div>

                    <div id="icon-play" class="relative z-10 hidden pl-1">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-8 h-8">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </div>
                </button>

                <p class="text-xs font-secondary-100 text-boda-azul-base mt-3 uppercase tracking-widest opacity-60">
                    Nuestra Canción
                </p>
            </div>

            <div class="h-[30%] w-full flex flex-col justify-center items-center px-8 text-center bg-boda-blanco-base">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 text-boda-rojo-base mb-4 opacity-50">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
                </svg>
                
                <h3 class="text-2xl md:text-3xl font-secondary-300 text-boda-oscuro-base leading-relaxed">
                    "El amor no se trata de mirar al otro, sino de mirar juntos en la misma dirección."
                </h3>
                
                <p class="mt-4 text-sm font-secondary-100 text-boda-verde-base">
                    — Antoine de Saint-Exupéry
                </p>
            </div>

        </section>

        <section id="seccion-padres" class="w-full py-20 px-6 bg-boda-blanco-base text-center">
             <div class="max-w-4xl mx-auto space-y-16">
                <h2 class="text-3xl md:text-4xl font-secondary-300 text-boda-verde-base mb-12">
                    Con la bendición de nuestros padres
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-8">
                    <article class="flex flex-col items-center">
                        <div class="w-16 h-0.5 bg-boda-azul-base mb-6"></div>
                        <h3 class="text-xl font-secondary-300 text-boda-azul-base mb-4 uppercase tracking-widest">
                            Padres del Novio
                        </h3>
                        <p class="text-lg md:text-xl font-secondary-200 text-boda-oscuro-base">
                            Carlos González Gaytán
                        </p>
                        <p class="text-lg md:text-xl font-secondary-200 text-boda-oscuro-base">
                            Cristian García Torres
                        </p>
                    </article>
                    <article class="flex flex-col items-center">
                        <div class="w-16 h-0.5 bg-boda-rojo-base mb-6"></div>
                        <h3 class="text-xl font-secondary-300 text-boda-rojo-base mb-4 uppercase tracking-widest">
                            Padres de la Novia
                        </h3>
                        <p class="text-lg md:text-xl font-secondary-200 text-boda-oscuro-base">
                            José Guadalupe Gómez Quiroz
                        </p>
                        <p class="text-lg md:text-xl font-secondary-200 text-boda-oscuro-base">
                            Ma. de los Ángeles Mendoza Mendoza
                        </p>
                    </article>
                </div>
                <div class="mt-16 pt-10 border-t border-gray-200">
                    <h3 class="text-xl font-secondary-300 text-boda-verde-base mb-6 uppercase tracking-widest">
                        Padrinos de Velación
                    </h3>
                    <p class="text-xl md:text-2xl font-secondary-300 text-boda-oscuro-base">
                        Pedro Esteban Solis Solano
                    </p>
                    <span class="block text-lg font-secondary-100 my-1">&</span>
                    <p class="text-xl md:text-2xl font-secondary-300 text-boda-oscuro-base">
                        María de Lourdes Gómez Quiroz
                    </p>
                </div>
            </div>
        </section>

        <section id="seccion-regalos" class="w-full py-24 px-6 bg-boda-verde-base text-boda-blanco-base text-center">
            <div class="max-w-2xl mx-auto flex flex-col items-center gap-6">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="0.8" stroke="currentColor" class="w-16 h-16 mb-2 text-boda-blanco-base opacity-80">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H4.5a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
                </svg>
                <h2 class="text-4xl md:text-5xl font-secondary-300 mb-4">Regalos</h2>
                <div class="w-24 h-px bg-boda-blanco-base opacity-50"></div>
                <p class="text-lg md:text-xl font-secondary-200 leading-relaxed italic opacity-90 max-w-lg">
                    "Su presencia es nuestro mejor regalo, pero si desean tener un detalle con nosotros, agradecemos infinitamente su cariño."
                </p>
                <div class="mt-6 border border-boda-blanco-base/30 rounded-full px-8 py-2 bg-boda-black/10 backdrop-blur-sm">
                    <p class="text-sm font-secondary-300 tracking-widest uppercase">Lluvia de Sobres</p>
                 </div>
            </div>
        </section>

        <div id="seccion-final">
            <CuentaRegresiva />
        </div>

        <footer class="bg-boda-oscuro-base text-boda-blanco-base py-8 text-center">
            <p class="font-secondary-400 text-sm opacity-60">Jonathan & Areli — 2025</p>
        </footer>

    </main>
</Layout>

<script is:inline>
    // 1. Inicializar Audio Globalmente
    window.bodaAudio = new Audio('/cancion_fondo.mp3');
    window.bodaAudio.loop = true;
    window.bodaAudio.volume = 0.6;
    window.isPlaying = false; // Estado inicial

    // 2. Controlar el botón del Player
    const btnPlayer = document.getElementById('btn-player');
    const iconPause = document.getElementById('icon-pause');
    const iconPlay = document.getElementById('icon-play');

    if (btnPlayer) {
        btnPlayer.addEventListener('click', () => {
            if (window.isPlaying) {
                // Si está sonando, pausar
                window.bodaAudio.pause();
                window.isPlaying = false;
                // Mostrar icono Play (triángulo)
                iconPause.classList.add('hidden');
                iconPlay.classList.remove('hidden');
            } else {
                // Si está pausado, reproducir
                window.bodaAudio.play();
                window.isPlaying = true;
                // Mostrar icono Pause (barras)
                iconPlay.classList.add('hidden');
                iconPause.classList.remove('hidden');
            }
        });
    }

    // Escuchar evento personalizado desde la Carta para actualizar el estado visual
    // cuando la música inicie automáticamente
    window.addEventListener('musicaIniciada', () => {
        window.isPlaying = true;
        if(iconPlay && iconPause) {
            iconPlay.classList.add('hidden');
            iconPause.classList.remove('hidden');
        }
    });
</script>
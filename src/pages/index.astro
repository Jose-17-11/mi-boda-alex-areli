---
import { Image } from 'astro:assets';
import fondoFlores from '@assets/fondos-para-invitaciones-de-bodas-con-flroes-2.png';
// IMPORTA AQUÍ LA FOTO DE LOS NOVIOS
import fotoNovios from '@assets/1.jpeg'; 
import fotoNovios2 from '@assets/2.jpeg'; 
import fotoNovios3 from '@assets/3.jpeg'; 

import Layout from '../layouts/Layout.astro';
import SeccionCarta from '@components/Sections/SeccionCarta.astro';
import SeccionNovios from '@components/Sections/SeccionNovios.astro';
import SeccionPadres from '@components/Sections/SeccionPadres.astro';

import Carta from '@components/Carta.astro';
import CuentaRegresiva from '@components/CuentaRegresiva.astro'; 
import Itinerario from '@components/Itinerario.astro'; // <--- 1. IMPORTAR NUEVO COMPONENTE

const idList = ['seccionCarta', 'seccion-novios', 'fotoNovios2', 
                'seccion-padres', 'seccion-itinerario', 'cuenta-regresiva', 
                'seccion-final'];
---
<Layout title="Boda de Jonathan y Areli">
    <main class="text-boda-oscuro-base overflow-x-hidden">
        <!-- Seccion de la carta -->
        <SeccionCarta id={idList[0]} />
        <!-- Seccion de los novios y controles de la cancion -->
        <SeccionNovios id={idList[1]} />
        <!-- Seccion donde se muestra la segunda imagen -->
        <div
            id={idList[2]}
            class="h-[500px] w-full relative mb-16">
            <div class="absolute top-0 left-0 w-full h-16 bg-gradient-to-b from-boda-blanco-base to-transparent z-10"></div>
            <Image src={fotoNovios2} alt="Los Novios" class="w-full h-full object-cover object-top opacity-90" />
            <div class="absolute bottom-0 left-0 w-full h-20 bg-gradient-to-t from-boda-blanco-base to-transparent z-10"></div>
        </div>
        <!-- La seccion donde estan las dedicatorias -->
        <SeccionPadres id={idList[3]} />
        <!-- La seccion del itinerario de la boda -->
        <div class="h-[50%] w-full relative">
                <div class="absolute top-0 left-0 w-full h-16 bg-gradient-to-b from-boda-blanco-base to-transparent z-10"></div>
                <Image src={fotoNovios3} alt="Los Novios" class="w-full h-full object-cover object-top opacity-70" />
                <div class="absolute bottom-0 left-0 w-full h-20 bg-gradient-to-t from-boda-blanco-base to-transparent z-10"></div>
        </div>
        <!-- La seccion del itinerario de la boda -->
        <div id="seccion-itinerario">
            <Itinerario />
        </div>
        <!-- La seccion de la cuenta regresiva de la boda -->
        <div id="cuenta-regresiva">
            <CuentaRegresiva />
        </div>
        <!-- Seccion con mensaje y dedicatorias -->
        <section id="seccion-final" class="w-full py-24 px-6 bg-boda-verde-base text-boda-blanco-base text-center">
            <div class="max-w-2xl mx-auto flex flex-col items-center gap-6">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="0.8" stroke="currentColor" class="w-16 h-16 mb-2 text-boda-blanco-base opacity-80">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H4.5a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
                </svg>
                <h2 class="text-4xl md:text-5xl font-secondary-300 mb-4">Regalos</h2>
                <div class="w-24 h-px bg-boda-blanco-base opacity-50"></div>
                <p class="text-lg md:text-xl font-secondary-200 leading-relaxed italic opacity-90 max-w-lg">
                    "Su presencia es nuestro mejor regalo, pero si desean tener un detalle con nosotros, agradecemos infinitamente su cariño."
                </p>
                <div class="mt-6 border border-boda-blanco-base/30 rounded-full px-8 py-2 bg-boda-black/10 backdrop-blur-sm">
                    <p class="text-sm font-secondary-300 tracking-widest uppercase">Deja un deseo</p>
                 </div>
            </div>
        </section>

        <footer class="bg-boda-oscuro-base text-boda-blanco-base py-8 text-center">
            <p class="font-secondary-400 text-sm opacity-60">Jonathan & Areli — 2025</p>
        </footer>

    </main>
</Layout>

<script is:inline>
    // ... Tu script de audio que ya tenías ...
    window.bodaAudio = new Audio('/cancion_fondo.mp3');
    window.bodaAudio.loop = true;
    window.bodaAudio.volume = 0.6;
    window.isPlaying = false; 

    const btnPlayer = document.getElementById('btn-player');
    const iconPause = document.getElementById('icon-pause');
    const iconPlay = document.getElementById('icon-play');

    if (btnPlayer) {
        btnPlayer.addEventListener('click', () => {
            if (window.isPlaying) {
                window.bodaAudio.pause();
                window.isPlaying = false;
                iconPause.classList.add('hidden');
                iconPlay.classList.remove('hidden');
            } else {
                window.bodaAudio.play();
                window.isPlaying = true;
                iconPlay.classList.add('hidden');
                iconPause.classList.remove('hidden');
            }
        });
    }

    window.addEventListener('musicaIniciada', () => {
        window.isPlaying = true;
        if(iconPlay && iconPause) {
            iconPlay.classList.add('hidden');
            iconPause.classList.remove('hidden');
        }
    });
</script>